"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _props,VTD={COMPONENT:"_VueTopDown_component",FAILURE:"_VueTopDown_failure",ROOT:"$_VueTopDown_root",MAPPING:"$_VueTopDown_mapping",OUTER_HTML:"$_VueTopDown_outerHTML",CLASS:"$_VueTopDown_class",STYLE:"$_VueTopDown_style",OUTER_DOM:"$_VueTopDown_outerDom",RENDER:"$_VueTopDown_render",LIMIT:"$_VueTopDown_limit"},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function linkMapping(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=Object.keys(e),i=Object.values(e),u={},r=function(e){var r=o[e],t=i.findIndex(function(e){return e===r});-1===t&&console.warn(e+" is missing"),u[e]=n[t]};for(var t in o)r(t);return u}function outerDom(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=str2dom(e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:"*");return o.removeAttribute(VTD.COMPONENT),"object"===(void 0===t?"undefined":_typeof(t))&&Object.keys(t).forEach(function(e){var r=t[e];if("string"==typeof r)try{o.querySelectorAll(e).forEach(function(e){return e.setAttribute(VTD.COMPONENT,kebab(r))})}catch(e){}}),o}function str2dom(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"*",t=document.createElement("div");t.setAttribute("id","root"),t.innerHTML=e;var o=void 0;try{if(o=t.querySelector(r))return o}catch(e){console.error(e)}try{return(o=t.querySelector("*"))||t}catch(e){return console.error(e),t}}function kebab(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return"string"==typeof e?e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase():""}function dom2render(t,r){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(!(t instanceof Function))return null;if(r instanceof Text)return r.data;if(!(r instanceof HTMLElement))return null;var e,n=r.getAttribute(VTD.COMPONENT);if(n)return render(t,n,{props:(e={},_defineProperty(e,VTD.OUTER_HTML,r.outerHTML.replace(new RegExp(VTD.COMPONENT+'[^"]*"[^"]*"',"i"),"")),_defineProperty(e,VTD.CLASS,(r.getAttribute("class")||"").split(" ")),_defineProperty(e,VTD.STYLE,r.getAttribute("style")),e)});var i=[];r.childNodes.forEach(function(e){var r=dom2render(t,e,o+1);r&&i.push(r)});var u={};return r.getAttributeNames().forEach(function(e){u[e]=r.getAttribute(e)}),render(t,r.tagName,{attrs:u},i)}function render(e,r,t,o){try{return o?e(r,t,o):e(r,t)}catch(e){console.error(e);var n=document.createElement(r);return n.setAttribute([VTD.FAILURE],""),n}}function _defineProperty$1(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var _props$1,VueTopDown={props:(_props={},_defineProperty$1(_props,VTD.OUTER_HTML,String),_defineProperty$1(_props,VTD.CLASS,Array),_defineProperty$1(_props,VTD.STYLE,String),_props),inheritAttrs:!1,data:function(){var e;return _defineProperty$1(e={},VTD.ROOT,"*"),_defineProperty$1(e,VTD.MAPPING,{}),_defineProperty$1(e,VTD.RENDER,null),e},computed:_defineProperty$1({},VTD.OUTER_DOM,function(){return outerDom(this.$props[VTD.OUTER_HTML]?this.$props[VTD.OUTER_HTML]:this.$el.outerHTML,linkMapping(this.$data[VTD.MAPPING],this.$options.components),this.$data[VTD.ROOT])}),render:function(e){return dom2render(e,this[VTD.OUTER_DOM])}};function _defineProperty$2(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var VueTopDownItem={props:(_props$1={},_defineProperty$2(_props$1,VTD.OUTER_HTML,String),_defineProperty$2(_props$1,VTD.CLASS,Array),_defineProperty$2(_props$1,VTD.STYLE,String),_props$1),inheritAttrs:!1,computed:{outerHTML:function(){return this[VTD.OUTER_HTML]},clazz:function(){return this[VTD.CLASS]}}};exports.VueTopDown=VueTopDown,exports.VueTopDownItem=VueTopDownItem,exports.VTDConstants=VTD;
